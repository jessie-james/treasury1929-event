<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mezzanine Seat Selection</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      overflow: auto;
    }
    .container {
      position: relative;
      max-width: 1000px;
      margin: 0 auto;
      background-color: #f4f4f4;
    }
    #floor-plan {
      display: block;
      max-width: 100%;
      width: 1000px;
      height: auto;
      margin: 0;
      padding: 0;
    }
    .seat-marker {
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: rgba(52, 211, 153, 0.5);
      border: 2px solid rgba(16, 185, 129, 0.8);
      transform: translate(-50%, -50%);
      z-index: 5;
      pointer-events: none;
    }
    .seat {
      position: absolute;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: transparent;
      transform: translate(-50%, -50%);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      color: white;
      z-index: 10;
    }
    .seat-center {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background-color: rgba(34, 197, 94, 0.2);
      border: 1px dashed rgba(255, 255, 255, 0);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }
    .seat:hover .seat-center {
      background-color: rgba(34, 197, 94, 0.5);
      border: 1px dashed rgba(255, 255, 255, 0.7);
    }
    .seat.selected .seat-center {
      background-color: rgba(59, 130, 246, 0.9);
      border: 2px solid white;
    }
  </style>
</head>
<body style="margin: 0; padding: 0; overflow: auto;">
  <div class="container">
    <img src="/mezzanine-floor.png" alt="Mezzanine Floor Plan" id="floor-plan">
    
    <!-- Table markers to show exact positions of green circles -->
    <!-- Table 1 (Top right) -->
    <div class="seat-marker" style="left: 950px; top: 285px;"></div>
    <div class="seat-marker" style="left: 968px; top: 314px;"></div>
    <div class="seat-marker" style="left: 954px; top: 350px;"></div>
    
    <!-- Table 2 (Right bottom) -->
    <div class="seat-marker" style="left: 854px; top: 402px;"></div>
    <div class="seat-marker" style="left: 814px; top: 402px;"></div>
    
    <!-- Table 3 (Middle right) -->
    <div class="seat-marker" style="left: 694px; top: 402px;"></div>
    <div class="seat-marker" style="left: 654px; top: 402px;"></div>
    
    <!-- Table 4 (Middle left) -->
    <div class="seat-marker" style="left: 536px; top: 402px;"></div>
    <div class="seat-marker" style="left: 494px; top: 402px;"></div>
    
    <!-- Table 5 (Far left bottom) -->
    <div class="seat-marker" style="left: 369px; top: 402px;"></div>
    <div class="seat-marker" style="left: 328px; top: 402px;"></div>
    
    <!-- Table 6 (Far left) -->
    <div class="seat-marker" style="left: 168px; top: 423px;"></div>
    <div class="seat-marker" style="left: 140px; top: 394px;"></div>
    
    <!-- Table 7 (Upper left) -->
    <div class="seat-marker" style="left: 46px; top: 352px;"></div>
    <div class="seat-marker" style="left: 32px; top: 315px;"></div>
    
    <!-- Table 1 (Top right) -->
    <div class="seat" style="left: 950px; top: 285px;" data-table="1" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 968px; top: 314px;" data-table="1" data-seat="2">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 954px; top: 350px;" data-table="1" data-seat="3">
      <div class="seat-center"></div>
    </div>
    
    <!-- Table 2 (Right bottom) -->
    <div class="seat" style="left: 854px; top: 402px;" data-table="2" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 814px; top: 402px;" data-table="2" data-seat="2">
      <div class="seat-center"></div>
    </div>
    
    <!-- Table 3 (Middle right) -->
    <div class="seat" style="left: 694px; top: 402px;" data-table="3" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 654px; top: 402px;" data-table="3" data-seat="2">
      <div class="seat-center"></div>
    </div>
    
    <!-- Table 4 (Middle left) -->
    <div class="seat" style="left: 536px; top: 402px;" data-table="4" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 494px; top: 402px;" data-table="4" data-seat="2">
      <div class="seat-center"></div>
    </div>
    
    <!-- Table 5 (Far left bottom) -->
    <div class="seat" style="left: 369px; top: 402px;" data-table="5" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 328px; top: 402px;" data-table="5" data-seat="2">
      <div class="seat-center"></div>
    </div>
    
    <!-- Table 6 (Far left) -->
    <div class="seat" style="left: 168px; top: 423px;" data-table="6" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 140px; top: 394px;" data-table="6" data-seat="2">
      <div class="seat-center"></div>
    </div>
    
    <!-- Table 7 (Upper left) -->
    <div class="seat" style="left: 46px; top: 352px;" data-table="7" data-seat="1">
      <div class="seat-center"></div>
    </div>
    <div class="seat" style="left: 32px; top: 315px;" data-table="7" data-seat="2">
      <div class="seat-center"></div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const seats = document.querySelectorAll('.seat');
      let selectedSeats = [];
      
      seats.forEach(seat => {
        seat.addEventListener('click', function() {
          const tableId = this.getAttribute('data-table');
          const seatNumber = this.getAttribute('data-seat');
          const key = `${tableId}-${seatNumber}`;
          
          // Check if already selected
          const index = selectedSeats.findIndex(s => s.key === key);
          
          if (index >= 0) {
            // Remove if already selected
            selectedSeats.splice(index, 1);
            this.classList.remove('selected');
            this.querySelector('.seat-center').textContent = '';
          } else {
            // Add if not selected (max 4)
            if (selectedSeats.length < 4) {
              selectedSeats.push({
                key,
                tableId: parseInt(tableId),
                seatNumber: parseInt(seatNumber)
              });
              this.classList.add('selected');
              this.querySelector('.seat-center').textContent = seatNumber;
            }
          }
          
          // Send message to parent window
          window.parent.postMessage({
            type: 'SEAT_SELECTION',
            selection: selectedSeats
          }, '*');
        });
      });

      // Hide the markers after 3 seconds - they are just to validate alignment
      setTimeout(() => {
        document.querySelectorAll('.seat-marker').forEach(marker => {
          marker.style.opacity = '0';
          marker.style.transition = 'opacity 1s ease';
        });
      }, 3000);
    });
  </script>
</body>
</html>